{"ast":null,"code":"import axios from 'axios';\nimport { api, API_BASE_URL } from \"../../config/api\";\nimport { GET_USER_PROFILE_SUCCESS, GET_USER_PROFILE_FAILURE, LOGIN_USER_FAILURE, LOGIN_USER_SUCCESS, REGISTER_USER_FAILURE, REGISTER_USER_SUCCESS, FIND_USER_BY_ID_FAILURE, FIND_USER_BY_ID_SUCCESS, UPDATE_USER_SUCCESS, UPDATE_USER_FAILURE, FOLLOW_USER_SUCCESS, FOLLOW_USER_FAILURE, LOGOUT } from \"./ActionType\";\nexport const loginUser = loginData => async dispatch => {\n  try {\n    console.log(\"Login data being sent: \", loginData);\n    const {\n      data\n    } = await axios.post(`${API_BASE_URL}/auth/signin`, loginData);\n    console.log(\"Login response data: \", data);\n    console.log(\"Full response from backend: \", data);\n    if (data.token) {\n      localStorage.setItem(\"jwt\", data.token);\n      console.log(\"JWT saved to localStorage: \", data.token);\n    }\n    dispatch({\n      type: LOGIN_USER_SUCCESS,\n      payload: {\n        jwt: data.token,\n        user: data.user\n      }\n    });\n    return {\n      success: true\n    };\n  } catch (error) {\n    console.error(\"Login failed: \", error);\n    dispatch({\n      type: LOGIN_USER_FAILURE,\n      payload: error.message\n    });\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n};\nexport const registerUser = registerData => async dispatch => {\n  try {\n    const {\n      data\n    } = await axios.post(`${API_BASE_URL}/auth/signup`, registerData);\n    console.log(\"logged in user\", data);\n    if (data.token) {\n      localStorage.setItem(\"jwt\", data.token);\n    }\n    dispatch({\n      type: REGISTER_USER_SUCCESS,\n      payload: {\n        jwt: data.token,\n        user: data.user\n      }\n    });\n  } catch (error) {\n    console.log(\"error\", error);\n    dispatch({\n      type: REGISTER_USER_FAILURE,\n      payload: error.message\n    });\n  }\n};\n// export const getUserProfile = (jwt) => async (dispatch) => {\n//   try {\n//     const { data } = await api.get(`${API_BASE_URL}/api/users/profile`, {\n//       headers: {\n//         \"Authorization\": `Bearer ${jwt}`\n//       }\n//     })\n\n//     dispatch({ type: GET_USER_PROFILE_SUCCESS, payload:data })\n//   } catch (error) {\n//     dispatch({ type: GET_USER_PROFILE_FAILURE, payload:error.message })\n//   }\n// }\n\nexport const getUserProfile = () => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.get(\"/api/users/profile\");\n    dispatch({\n      type: GET_USER_PROFILE_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    var _error$response;\n    console.error(\"getUserProfile error: \", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n    dispatch({\n      type: GET_USER_PROFILE_FAILURE,\n      payload: error.message\n    });\n  }\n};\nexport const findUserById = userId => async dispatch => {\n  try {\n    const {\n      data\n    } = await axios.get(`${API_BASE_URL}/api/users/${userId}`);\n\n    //const { data } = await axios.get(`/api/users/${userId}`);\n    dispatch({\n      type: FIND_USER_BY_ID_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(\"error\", error);\n    dispatch({\n      type: FIND_USER_BY_ID_FAILURE,\n      payload: error.message\n    });\n  }\n};\nexport const updateUserProfile = reqData => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.put(`/api/users/update`, reqData);\n    console.log(\"updated user\", data);\n    dispatch({\n      type: UPDATE_USER_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(\"error\", error);\n    dispatch({\n      type: UPDATE_USER_FAILURE,\n      payload: error.message\n    });\n  }\n};\nexport const followUserAction = (userId, reqData) => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.put(`/api/users/${userId}/follow`, reqData);\n    console.log(\"followed user\", data);\n    dispatch({\n      type: FOLLOW_USER_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(\"error\", error);\n    dispatch({\n      type: FOLLOW_USER_FAILURE,\n      payload: error.message\n    });\n  }\n};\nexport const logout = () => async dispatch => {\n  localStorage.removeItem(\"jwt\");\n  dispatch({\n    type: LOGOUT,\n    payload: null\n  });\n};","map":{"version":3,"names":["axios","api","API_BASE_URL","GET_USER_PROFILE_SUCCESS","GET_USER_PROFILE_FAILURE","LOGIN_USER_FAILURE","LOGIN_USER_SUCCESS","REGISTER_USER_FAILURE","REGISTER_USER_SUCCESS","FIND_USER_BY_ID_FAILURE","FIND_USER_BY_ID_SUCCESS","UPDATE_USER_SUCCESS","UPDATE_USER_FAILURE","FOLLOW_USER_SUCCESS","FOLLOW_USER_FAILURE","LOGOUT","loginUser","loginData","dispatch","console","log","data","post","token","localStorage","setItem","type","payload","jwt","user","success","error","message","registerUser","registerData","getUserProfile","get","_error$response","response","findUserById","userId","updateUserProfile","reqData","put","followUserAction","logout","removeItem"],"sources":["C:/Users/Admin/vs/twitter/src/Store/Auth/Action.js"],"sourcesContent":["import axios from 'axios';\r\nimport { api, API_BASE_URL } from \"../../config/api\"\r\nimport { GET_USER_PROFILE_SUCCESS, GET_USER_PROFILE_FAILURE, LOGIN_USER_FAILURE, LOGIN_USER_SUCCESS, REGISTER_USER_FAILURE, REGISTER_USER_SUCCESS, FIND_USER_BY_ID_FAILURE, FIND_USER_BY_ID_SUCCESS, UPDATE_USER_SUCCESS, UPDATE_USER_FAILURE, FOLLOW_USER_SUCCESS, FOLLOW_USER_FAILURE, LOGOUT } from \"./ActionType\"\r\n\r\n\r\nexport const loginUser = (loginData) => async (dispatch) => {\r\n    try {\r\n         console.log(\"Login data being sent: \", loginData);  \r\n        const { data } = await axios.post(`${API_BASE_URL}/auth/signin`, loginData)\r\n           console.log(\"Login response data: \", data); \r\n           console.log(\"Full response from backend: \", data);\r\n\r\n       if (data.token) {\r\n  localStorage.setItem(\"jwt\", data.token);\r\n  console.log(\"JWT saved to localStorage: \", data.token);\r\n} \r\n\r\n        dispatch({ \r\n          type: LOGIN_USER_SUCCESS, \r\n          payload: { jwt: data.token, user: data.user } \r\n        });\r\n\r\n        return { success: true }\r\n    } catch (error) {\r\n        console.error(\"Login failed: \", error); \r\n        dispatch({ type: LOGIN_USER_FAILURE, payload: error.message })\r\n        return { success: false, error: error.message }\r\n    }\r\n}\r\n\r\nexport const registerUser = (registerData) => async (dispatch) => {\r\n    try {\r\n        const { data } = await axios.post(`${API_BASE_URL}/auth/signup`, registerData)\r\n        console.log(\"logged in user\", data)\r\n        if (data.token) {\r\n            localStorage.setItem(\"jwt\", data.token)\r\n        }\r\n        dispatch({ type: REGISTER_USER_SUCCESS,  payload: {\r\n    jwt: data.token,\r\n    user: data.user \r\n  }, })\r\n    } catch (error) {\r\n        console.log(\"error\", error)\r\n        dispatch({ type: REGISTER_USER_FAILURE, payload: error.message })\r\n    }\r\n}\r\n// export const getUserProfile = (jwt) => async (dispatch) => {\r\n//   try {\r\n//     const { data } = await api.get(`${API_BASE_URL}/api/users/profile`, {\r\n//       headers: {\r\n//         \"Authorization\": `Bearer ${jwt}`\r\n//       }\r\n//     })\r\n\r\n//     dispatch({ type: GET_USER_PROFILE_SUCCESS, payload:data })\r\n//   } catch (error) {\r\n//     dispatch({ type: GET_USER_PROFILE_FAILURE, payload:error.message })\r\n//   }\r\n// }\r\n\r\nexport const getUserProfile = () => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.get(\"/api/users/profile\");\r\n    dispatch({ type: GET_USER_PROFILE_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    console.error(\"getUserProfile error: \", error.response?.data || error.message);\r\n    dispatch({ type: GET_USER_PROFILE_FAILURE, payload: error.message });\r\n  }\r\n}\r\n\r\n \r\nexport const findUserById = (userId) => async (dispatch) => {\r\n    try {\r\n        const { data } = await axios.get(`${API_BASE_URL}/api/users/${userId}`);\r\n\r\n        //const { data } = await axios.get(`/api/users/${userId}`);\r\n        dispatch({ type: FIND_USER_BY_ID_SUCCESS, payload: data });\r\n    } catch (error) {\r\n        console.log(\"error\", error);\r\n        dispatch({ type: FIND_USER_BY_ID_FAILURE, payload: error.message });\r\n    }\r\n};\r\n\r\nexport const updateUserProfile = (reqData) => async (dispatch) => {\r\n    try {\r\n        const { data } = await api.put(`/api/users/update`, reqData)\r\n        console.log(\"updated user\", data)\r\n        dispatch({ type:UPDATE_USER_SUCCESS, payload:data })\r\n        }\r\n    catch (error) {\r\n        console.log(\"error\", error)\r\n        dispatch({ type:UPDATE_USER_FAILURE, payload:error.message })\r\n    }\r\n}\r\n\r\nexport const followUserAction = (userId, reqData) => async (dispatch) => {\r\n    try {\r\n        const { data } = await api.put(`/api/users/${userId}/follow`, reqData)\r\n        console.log(\"followed user\", data)\r\n        dispatch({ type:FOLLOW_USER_SUCCESS, payload:data })\r\n        }\r\n    catch (error) {\r\n        console.log(\"error\", error)\r\n        dispatch({ type:FOLLOW_USER_FAILURE, payload:error.message })\r\n    }\r\n}\r\n\r\nexport const logout = () => async (dispatch) => {\r\n\r\n    localStorage.removeItem(\"jwt\")\r\n    dispatch({ type: LOGOUT, payload: null })\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}